<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrome Extension Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .code {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
            margin: 10px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>ğŸ¤– AI Chatbot Extension - í…ŒìŠ¤íŠ¸ í˜ì´ì§€</h1>
    
    <div class="info">
        <strong>í™•ì¥ í”„ë¡œê·¸ë¨ ì„¤ì¹˜ í™•ì¸</strong><br>
        ì´ í˜ì´ì§€ëŠ” Chrome Extension AI Chatbotì´ ì œëŒ€ë¡œ ì„¤ì¹˜ë˜ê³  ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì…ë‹ˆë‹¤.
    </div>

    <h2>ğŸ“‹ ì„¤ì¹˜ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
    
    <div id="extension-status">
        <div class="status info">
            <strong>1. í™•ì¥ í”„ë¡œê·¸ë¨ ë¡œë“œ ìƒíƒœ í™•ì¸ ì¤‘...</strong>
        </div>
    </div>

    <h2>ğŸ”§ ì„¤ì¹˜ ë°©ë²•</h2>
    <div class="code">
        1. Chromeì—ì„œ chrome://extensions/ ì ‘ì†<br>
        2. ìš°ìƒë‹¨ "ê°œë°œì ëª¨ë“œ" í™œì„±í™”<br>
        3. "ì••ì¶•í•´ì œëœ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ë¡œë“œí•©ë‹ˆë‹¤" í´ë¦­<br>
        4. ì´ í”„ë¡œì íŠ¸ í´ë” ì„ íƒ<br>
        5. í™•ì¥ í”„ë¡œê·¸ë¨ ì•„ì´ì½˜ì´ íˆ´ë°”ì— ë‚˜íƒ€ë‚˜ëŠ”ì§€ í™•ì¸
    </div>

    <h2>ğŸš€ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h2>
    <button onclick="testPopup()">íŒì—… ì—´ê¸° í…ŒìŠ¤íŠ¸</button>
    <button onclick="testSettings()">ì„¤ì • í˜ì´ì§€ ì—´ê¸°</button>
    <button onclick="testConnection()">ì—°ê²° í…ŒìŠ¤íŠ¸</button>
    
    <div id="test-results"></div>

    <h2>ğŸ¦™ Ollama ì„¤ì • (ë¡œì»¬ AI)</h2>
    <div class="code">
        # Ollama ì„¤ì¹˜ (macOS)<br>
        brew install ollama<br><br>
        
        # Ollama ì„œë¹„ìŠ¤ ì‹œì‘<br>
        ollama serve<br><br>
        
        # ëª¨ë¸ ë‹¤ìš´ë¡œë“œ (ì˜ˆ: Llama 3)<br>
        ollama pull llama3<br><br>
        
        # í™•ì¥ í”„ë¡œê·¸ë¨ì—ì„œ ì„¤ì •:<br>
        - Backend: "Ollama (Local)" ì„ íƒ<br>
        - URL: http://localhost:11434<br>
        - ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    </div>

    <h2>ğŸ”— n8n ì„¤ì • (Webhook)</h2>
    <div class="code">
        # n8n ì›Œí¬í”Œë¡œìš° ì„¤ì •:<br>
        1. Webhook ë…¸ë“œ ì¶”ê°€ (POST ë°©ì‹)<br>
        2. AI ì„œë¹„ìŠ¤ ì—°ê²° (OpenAI, Claude ë“±)<br>
        3. Response ë…¸ë“œë¡œ JSON ì‘ë‹µ ì„¤ì •<br><br>
        
        # í™•ì¥ í”„ë¡œê·¸ë¨ì—ì„œ ì„¤ì •:<br>
        - Backend: "n8n Webhook" ì„ íƒ<br>
        - URL: https://your-n8n.com/webhook/chatbot<br>
        - ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    </div>

    <script>
        // í™•ì¥ í”„ë¡œê·¸ë¨ ìƒíƒœ í™•ì¸
        function checkExtensionStatus() {
            const statusDiv = document.getElementById('extension-status');
            
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                try {
                    chrome.runtime.sendMessage('test', (response) => {
                        if (chrome.runtime.lastError) {
                            statusDiv.innerHTML = `
                                <div class="status error">
                                    <strong>âŒ í™•ì¥ í”„ë¡œê·¸ë¨ í†µì‹  ì˜¤ë¥˜</strong><br>
                                    ${chrome.runtime.lastError.message}
                                </div>
                            `;
                        } else {
                            statusDiv.innerHTML = `
                                <div class="status success">
                                    <strong>âœ… í™•ì¥ í”„ë¡œê·¸ë¨ì´ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!</strong><br>
                                    ì´ì œ ë¸Œë¼ìš°ì € íˆ´ë°”ì˜ ğŸ¤– ì•„ì´ì½˜ì„ í´ë¦­í•´ë³´ì„¸ìš”.
                                </div>
                            `;
                        }
                    });
                } catch (error) {
                    statusDiv.innerHTML = `
                        <div class="status error">
                            <strong>âŒ í™•ì¥ í”„ë¡œê·¸ë¨ ì˜¤ë¥˜</strong><br>
                            ${error.message}
                        </div>
                    `;
                }
            } else {
                statusDiv.innerHTML = `
                    <div class="status error">
                        <strong>âŒ í™•ì¥ í”„ë¡œê·¸ë¨ì´ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</strong><br>
                        ìœ„ì˜ ì„¤ì¹˜ ë°©ë²•ì„ ë”°ë¼ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•´ì£¼ì„¸ìš”.
                    </div>
                `;
            }
        }

        function testPopup() {
            alert('ë¸Œë¼ìš°ì € íˆ´ë°”ì˜ ğŸ¤– ì•„ì´ì½˜ì„ í´ë¦­í•˜ì—¬ íŒì—…ì„ ì—´ì–´ë³´ì„¸ìš”!');
        }

        function testSettings() {
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                chrome.runtime.openOptionsPage();
            } else {
                alert('í™•ì¥ í”„ë¡œê·¸ë¨ì´ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        function testConnection() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div class="status info">ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘...</div>';
            
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                chrome.runtime.sendMessage({action: 'testConnection'}, (response) => {
                    if (response && response.success) {
                        const result = response.data;
                        resultsDiv.innerHTML = `
                            <div class="status ${result.connected ? 'success' : 'error'}">
                                <strong>${result.connected ? 'âœ…' : 'âŒ'} ì—°ê²° í…ŒìŠ¤íŠ¸ ê²°ê³¼</strong><br>
                                ë°±ì—”ë“œ: ${result.backend || 'Unknown'}<br>
                                ìƒíƒœ: ${result.connected ? 'ì—°ê²°ë¨' : 'ì—°ê²° ì‹¤íŒ¨'}<br>
                                ${result.error ? `ì˜¤ë¥˜: ${result.error}` : ''}
                                ${result.models ? `ëª¨ë¸ ìˆ˜: ${result.models}ê°œ` : ''}
                            </div>
                        `;
                    } else {
                        resultsDiv.innerHTML = `
                            <div class="status error">
                                <strong>âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨</strong><br>
                                ${response ? response.error : 'ì‘ë‹µ ì—†ìŒ'}
                            </div>
                        `;
                    }
                });
            } else {
                resultsDiv.innerHTML = `
                    <div class="status error">
                        <strong>âŒ í™•ì¥ í”„ë¡œê·¸ë¨ì´ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</strong>
                    </div>
                `;
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒíƒœ í™•ì¸
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkExtensionStatus, 1000);
        });
    </script>
</body>
</html>