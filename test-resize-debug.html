<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사이드바 리사이즈 디버깅 테스트</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .debug-info {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: monospace;
        }
        .test-steps {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #2196F3;
        }
        .expected-behavior {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
        }
        .troubleshooting {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }
    </style>
</head>
<body>
    <h1>🔧 사이드바 리사이즈 디버깅 테스트</h1>
    
    <div class="debug-info">
        <h3>현재 디버깅 상태</h3>
        <p>✅ 마우스 이벤트 발생 확인됨</p>
        <p>✅ 콘솔에 "Sidebar resized to: 350px" 로그 출력됨</p>
        <p>❌ 실제 사이드바 크기 변경 안됨</p>
        <p>🔍 CSS !important 규칙과 JavaScript 스타일 충돌 의심</p>
    </div>

    <div class="test-steps">
        <h3>📋 테스트 단계</h3>
        <ol>
            <li><strong>사이드바 열기</strong>: AI 챗봇 버튼 클릭</li>
            <li><strong>리사이즈 핸들 확인</strong>: 사이드바 왼쪽 가장자리 (10px 폭)</li>
            <li><strong>호버 테스트</strong>: 마우스 올렸을 때 연한 파란색 배경 표시되는지 확인</li>
            <li><strong>드래그 테스트</strong>: 마우스 드래그하여 크기 조정</li>
            <li><strong>콘솔 확인</strong>: F12 → Console 탭에서 디버깅 로그 확인</li>
        </ol>
    </div>

    <div class="expected-behavior">
        <h3>✅ 예상 동작</h3>
        <ul>
            <li>리사이즈 핸들 호버 시 연한 파란색 배경 표시</li>
            <li>드래그 시 커서가 ↔ 모양으로 변경</li>
            <li>드래그 중 사이드바 너비가 실시간으로 변경</li>
            <li>페이지 내용이 사이드바 크기에 맞춰 조정</li>
            <li>콘솔에 상세한 리사이즈 로그 출력</li>
        </ul>
    </div>

    <div class="troubleshooting">
        <h3>🔧 적용된 수정사항</h3>
        <ul>
            <li><strong>CSS 수정</strong>: width에서 !important 제거</li>
            <li><strong>JavaScript 수정</strong>: setProperty()로 !important 강제 적용</li>
            <li><strong>z-index 수정</strong>: 리사이즈 핸들을 최상위로 설정</li>
            <li><strong>핸들 크기 증가</strong>: 6px → 10px로 확대</li>
            <li><strong>디버깅 로그 추가</strong>: 상세한 리사이즈 정보 출력</li>
            <li><strong>시각적 피드백 강화</strong>: 호버 시 배경색 표시</li>
        </ul>
    </div>

    <div class="debug-info">
        <h3>🔍 콘솔에서 확인할 로그</h3>
        <pre>
[AI Chatbot] Start resize: {startX: 1200, startWidth: 400}
[AI Chatbot] Resizing: {startX: 1200, clientX: 1150, deltaX: 50, startWidth: 400, newWidth: 450}
[AI Chatbot] Sidebar resized to: 450px
        </pre>
    </div>

    <div class="test-steps">
        <h3>🐛 문제 해결 체크리스트</h3>
        <ol>
            <li>브라우저 개발자 도구 열기 (F12)</li>
            <li>Elements 탭에서 .ai-chatbot-sidebar 요소 찾기</li>
            <li>Styles 패널에서 width 속성 확인</li>
            <li>JavaScript로 설정한 인라인 스타일이 적용되는지 확인</li>
            <li>CSS 규칙이 인라인 스타일을 덮어쓰는지 확인</li>
        </ol>
    </div>

    <script>
        // 페이지 로드 시 디버깅 정보 출력
        console.log('🔧 리사이즈 디버깅 페이지 로드됨');
        console.log('사이드바를 열고 리사이즈를 테스트해보세요.');
        
        // 5초마다 사이드바 상태 체크
        setInterval(() => {
            const sidebar = document.querySelector('.ai-chatbot-sidebar');
            if (sidebar) {
                console.log('📏 현재 사이드바 상태:', {
                    width: sidebar.offsetWidth,
                    computedWidth: getComputedStyle(sidebar).width,
                    inlineStyle: sidebar.style.width
                });
            }
        }, 5000);
    </script>
</body>
</html>